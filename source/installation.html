

<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Installation &#8212; MParT  documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=12da95d707ffb74b382d" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=12da95d707ffb74b382d" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=12da95d707ffb74b382d" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=12da95d707ffb74b382d" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=12da95d707ffb74b382d" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=12da95d707ffb74b382d" />

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/design-tabs.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'source/installation';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Getting Started" href="getting_started.html" />
    <link rel="prev" title="MParT: Monotone Parameterization Toolkit" href="../index.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
<div class="bd-header__inner bd-page-width">
  <label class="sidebar-toggle primary-toggle" for="__primary">
    <span class="fa-solid fa-bars"></span>
  </label>
  
  <div class="navbar-header-items__start">
    
      <div class="navbar-item">
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
    <p class="title logo__title">MParT  documentation</p>
  
</a></div>
    
  </div>
  
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item"><nav class="navbar-nav">
  <p class="sidebar-header-items__title"
     role="heading"
     aria-level="1"
     aria-label="Site Navigation">
    Site Navigation
  </p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="#">
                        Installation
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="getting_started.html">
                        Getting Started
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="tutorials/index.html">
                        Tutorials
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="mathematics.html">
                        Mathematical Background
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="api/index.html">
                        API Reference
                      </a>
                    </li>
                
            <div class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    More
                </button>
                <div class="dropdown-menu">
                    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="development/index.html">
                        Community
                      </a>
                    </li>
                
                </div>
            </div>
            
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          
<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
        </div>
      
      
        <div class="navbar-item">
<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links navbar-nav"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/MeasureTransport/MParT" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fab fa-github-square"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">
<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
    </div>
  

  
    <label class="sidebar-toggle secondary-toggle" for="__secondary">
      <span class="fa-solid fa-outdent"></span>
    </label>
  
</div>

    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          <div class="navbar-item"><nav class="navbar-nav">
  <p class="sidebar-header-items__title"
     role="heading"
     aria-level="1"
     aria-label="Site Navigation">
    Site Navigation
  </p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="#">
                        Installation
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="getting_started.html">
                        Getting Started
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="tutorials/index.html">
                        Tutorials
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="mathematics.html">
                        Mathematical Background
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="api/index.html">
                        API Reference
                      </a>
                    </li>
                
            <div class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    More
                </button>
                <div class="dropdown-menu">
                    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="development/index.html">
                        Community
                      </a>
                    </li>
                
                </div>
            </div>
            
  </ul>
</nav></div>
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">
<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links navbar-nav"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/MeasureTransport/MParT" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fab fa-github-square"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">



<nav aria-label="Breadcrumbs">
  <ul class="bd-breadcrumbs" role="navigation" aria-label="Breadcrumb">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    <li class="breadcrumb-item active" aria-current="page">Installation</li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section id="installation">
<span id="id1"></span><h1>Installation<a class="headerlink" href="#installation" title="Permalink to this heading">#</a></h1>
<div class="sd-card sd-sphinx-override sd-mb-3 sd-shadow-sm docutils">
<div class="sd-card-body docutils">
<div class="sd-card-title sd-font-weight-bold docutils">
Install with Conda</div>
<p class="sd-card-text">It is possible to install the main c++ MParT library and its python wrapper via <a class="reference external" href="https://anaconda.org/conda-forge/mpart">conda-forge</a>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>conda<span class="w"> </span>install<span class="w"> </span>-c<span class="w"> </span>conda-forge<span class="w"> </span>mpart
</pre></div>
</div>
<p class="sd-card-text">Matlab, and CUDA are currently only supported when compiling from source.</p>
</div>
</div>
<div class="sd-card sd-sphinx-override sd-mb-3 sd-shadow-sm docutils">
<div class="sd-card-body docutils">
<div class="sd-card-title sd-font-weight-bold docutils">
Install with Julia</div>
<p class="sd-card-text">It is also possible to install MParT with Julia bindings using the Julia package manager:</p>
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="k">using</span><span class="w"> </span><span class="n">Pkg</span>
<span class="n">Pkg</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s">&quot;MParT&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p class="sd-card-text">Julia-specific documentation is hosted <a class="reference external" href="https://measuretransport.github.io/MParT.jl/dev/">here</a>.</p>
</div>
</div>
</section>
<section id="compiling-from-source">
<span id="compiling-source"></span><h1>Compiling from Source<a class="headerlink" href="#compiling-from-source" title="Permalink to this heading">#</a></h1>
<p>The MParT source code can be obtained in the <a class="reference external" href="https://github.com/MeasureTransport/MParT">MeasureTransport/MParT</a> repository on Github.</p>
<p>MParT uses CMake to handle dependencies and compiler configurations.   A basic build of MParT that should work on most operating systems can be obtained with:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>&lt;/path/to/MParT&gt;
mkdir<span class="w"> </span>build
<span class="nb">cd</span><span class="w"> </span>build
cmake<span class="w">                                               </span><span class="se">\</span>
<span class="w">  </span>-DCMAKE_INSTALL_PREFIX<span class="o">=</span>&lt;your/MParT/install/path&gt;<span class="w">  </span><span class="se">\</span>
<span class="w">  </span>-DKokkos_ENABLE_THREADS<span class="o">=</span>ON<span class="w">                        </span><span class="se">\</span>
..
make<span class="w"> </span>install
</pre></div>
</div>
<p>This will compile the main c++ <code class="code docutils literal notranslate"><span class="pre">mpart</span></code> library as well as any other language bindings that can be automatically configured.  If you are compiling on a multicore machine, you can use <code class="code docutils literal notranslate"><span class="pre">make</span> <span class="pre">-j</span> <span class="pre">N_JOBS</span> <span class="pre">install</span></code>, where <code class="code docutils literal notranslate"><span class="pre">N_JOBS</span></code> is the number of processes the computer can compile with in parallel.</p>
<p>This installation should also automatically install and build Kokkos, Eigen, Cereal, Pybind11, and Catch2, assuming they aren’t installed already. If CMake has trouble finding prior installations of these, then you can configuring CMake using:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="w"> </span>cmake<span class="w">                                              </span><span class="se">\</span>
<span class="w">  </span>-DCMAKE_INSTALL_PREFIX<span class="o">=</span>&lt;your/MParT/install/path&gt;<span class="w">  </span><span class="se">\</span>
<span class="w">  </span>-DKokkos_ROOT<span class="o">=</span>&lt;your/kokkos/install/root&gt;<span class="w">          </span><span class="se">\</span>
<span class="w">  </span>-DEigen3_ROOT<span class="o">=</span>&lt;your/eigen3/install/root&gt;<span class="w">          </span><span class="se">\</span>
<span class="w">  </span>-Dcereal_ROOT<span class="o">=</span>&lt;your/cereal/install/root&gt;<span class="w">          </span><span class="se">\</span>
<span class="w">  </span>-DKokkos_ENABLE_THREADS<span class="o">=</span>ON<span class="w">                        </span><span class="se">\</span>
<span class="w">  </span>-DKokkos_ENABLE_SERIAL<span class="o">=</span>ON<span class="w">                         </span><span class="se">\</span>
..
</pre></div>
</div>
<p>Feel free to mix and match previous installations of Eigen, Cereal, Kokkos, Pybind11, and Catch2 with libraries you don’t already have using these <code class="code docutils literal notranslate"><span class="pre">X_ROOT</span></code> flags. Note that Catch2 and Kokkos in this example will need to be compiled with shared libraries. MParT has not been tested with all versions of all dependencies, but it does require CMake version &gt;=3.13. Further, it has been tested with Kokkos 3.7.0, Eigen 3.4.0, Pybind11 2.9.2, Cereal 1.3.2, and Catch2 3.1.0 (there have been some issues encountered when compiling MParT with Catch2 3.0.1).</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>If you are using Kokkos &lt;3.7.0, you will need to use the <code class="code docutils literal notranslate"><span class="pre">Kokkos_ENABLE_PTHREAD</span></code> flag instead of <code class="code docutils literal notranslate"><span class="pre">Kokkos_ENABLE_THREADS</span></code> in the CMake configuration.</p>
</div>
<p>You can force MParT to use previously installed versions of the dependencies by setting <code class="code docutils literal notranslate"><span class="pre">MPART_FETCH_DEPS=OFF</span></code>.  The default value of <code class="code docutils literal notranslate"><span class="pre">MPART_FETCH_DEPS=ON</span></code> will allow MParT to download and locally install any external dependencies using CMake’s <code class="code docutils literal notranslate"><span class="pre">FetchContent</span></code> directive.</p>
<p>Note that if you do not wish to compile bindings for Python, Julia, or Matlab, you can turn off binding compilation by setting the <code class="code docutils literal notranslate"><span class="pre">MPART_&lt;language&gt;=OFF</span></code> variable during CMake configuration. For a default build with only the core c++ library, and without requiring the Cereal library, you can use</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="w"> </span>cmake<span class="w">                                              </span><span class="se">\</span>
<span class="w">  </span>-DCMAKE_INSTALL_PREFIX<span class="o">=</span>&lt;your/MParT/install/path&gt;<span class="w">  </span><span class="se">\</span>
<span class="w">  </span>-DKokkos_ENABLE_THREADS<span class="o">=</span>ON<span class="w">                        </span><span class="se">\</span>
<span class="w">  </span>-DMPART_PYTHON<span class="o">=</span>OFF<span class="w">                                </span><span class="se">\</span>
<span class="w">  </span>-DMPART_MATLAB<span class="o">=</span>OFF<span class="w">                                </span><span class="se">\</span>
<span class="w">  </span>-DMPART_JULIA<span class="o">=</span>OFF<span class="w">                                 </span><span class="se">\</span>
<span class="w">  </span>-DMPART_ARCHIVE<span class="o">=</span>OFF
..
</pre></div>
</div>
<p>See more details on MParT serialization, powered by the Cereal library, in the <a class="reference internal" href="api/utilities/serialization.html"><span class="doc">serialization</span></a> section.</p>
<p>MParT is built on Kokkos, which provides a single interface to many different multithreading capabilities like threads, OpenMP, CUDA, and OpenCL.   A list of available backends can be found on the <a class="reference external" href="https://github.com/kokkos/kokkos/blob/master/BUILD.md#device-backends">Kokkos wiki</a>.   The <code class="code docutils literal notranslate"><span class="pre">Kokkos_ENABLE_THREADS</span></code> option in the CMake configuration above can be changed to reflect different choices in device backends.   The OSX-provided clang compiler does not support OpenMP, so <code class="code docutils literal notranslate"><span class="pre">THREADS</span></code> is a natural choice for CPU-based multithreading on OSX.   However, you may find that OpenMP has slightly better performance with other compilers and operating systems.</p>
<section id="tests">
<h2>Tests<a class="headerlink" href="#tests" title="Permalink to this heading">#</a></h2>
<p>The command <code class="code docutils literal notranslate"><span class="pre">make</span> <span class="pre">install</span></code> will also create a test executable called <code class="code docutils literal notranslate"><span class="pre">RunTests</span></code> in the <code class="code docutils literal notranslate"><span class="pre">build</span></code> directory.  The tests can be run with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">RunTests</span>
</pre></div>
</div>
<p>Or, with the additional specification of the number of Kokkos threads to use:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">RunTests</span> <span class="o">--</span><span class="n">kokkos</span><span class="o">-</span><span class="n">threads</span><span class="o">=</span><span class="mi">4</span>
</pre></div>
</div>
</section>
<section id="environment-paths">
<h2>Environment Paths<a class="headerlink" href="#environment-paths" title="Permalink to this heading">#</a></h2>
<p>The final step is to set the relevant path variables to include the installation of MParT:</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-0" name="sd-tab-set-0" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-0">
MacOS</label><div class="sd-tab-content docutils">
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="nv">PYTHONPATH</span><span class="o">=</span><span class="nv">$PYTHONPATH</span>:&lt;your/MParT/install/path&gt;/python
<span class="nb">export</span><span class="w"> </span><span class="nv">DYLD_LIBRARY_PATH</span><span class="o">=</span><span class="nv">$DYLD_LIBRARY_PATH</span>:&lt;your/MParT/install/path&gt;/lib:&lt;your/MParT/install/path&gt;/python
</pre></div>
</div>
</div>
<input id="sd-tab-item-1" name="sd-tab-set-0" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-1">
Linux</label><div class="sd-tab-content docutils">
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="nv">PYTHONPATH</span><span class="o">=</span><span class="nv">$PYTHONPATH</span>:&lt;your/MParT/install/path&gt;/python
<span class="nb">export</span><span class="w"> </span><span class="nv">LD_LIBRARY_PATH</span><span class="o">=</span><span class="nv">$LD_LIBRARY_PATH</span>:&lt;your/MParT/install/path&gt;/lib:&lt;your/MParT/install/path&gt;/python
</pre></div>
</div>
</div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Depending on your python configuration, pybind11 may throw an error during configuration that looks like</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CMake</span> <span class="n">Error</span> <span class="ow">in</span> <span class="n">bindings</span><span class="o">/</span><span class="n">python</span><span class="o">/</span><span class="n">CMakeLists</span><span class="o">.</span><span class="n">txt</span><span class="p">:</span>
  <span class="n">Imported</span> <span class="n">target</span> <span class="s2">&quot;pybind11::module&quot;</span> <span class="n">includes</span> <span class="n">non</span><span class="o">-</span><span class="n">existent</span> <span class="n">path</span>
</pre></div>
</div>
<p>This often results when due to conda environment mismatches, but can typically be circumvented by explicitly setting the path to your python executable.  When calling cmake, add <code class="code docutils literal notranslate"><span class="pre">-DPYTHON_EXECUTABLE=`which</span> <span class="pre">python`</span></code>.</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>On OSX, using MParT with the system version of python might result in an error with something like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="ne">ImportError</span><span class="p">:</span> <span class="n">dlopen</span><span class="p">(</span><span class="n">pympart</span><span class="o">.</span><span class="n">so</span><span class="p">,</span> <span class="mi">2</span><span class="p">):</span> <span class="n">no</span> <span class="n">suitable</span> <span class="n">image</span> <span class="n">found</span><span class="o">.</span>  <span class="n">Did</span> <span class="n">find</span><span class="p">:</span>
    <span class="n">MParT</span><span class="o">/</span><span class="n">python</span><span class="o">/</span><span class="n">mpart</span><span class="o">/</span><span class="n">pympart</span><span class="o">.</span><span class="n">so</span><span class="p">:</span> <span class="n">mach</span><span class="o">-</span><span class="n">o</span><span class="p">,</span> <span class="n">but</span> <span class="n">wrong</span> <span class="n">architecture</span>
    <span class="n">MParT</span><span class="o">/</span><span class="n">python</span><span class="o">/</span><span class="n">mpart</span><span class="o">/</span><span class="n">pympart</span><span class="o">.</span><span class="n">so</span><span class="p">:</span> <span class="n">mach</span><span class="o">-</span><span class="n">o</span><span class="p">,</span> <span class="n">but</span> <span class="n">wrong</span> <span class="n">architecture</span>
</pre></div>
</div>
<p>You can sometimes force OSX to use the x86_64 version of python using the <code class="code docutils literal notranslate"><span class="pre">arch</span></code> executable.   For example, to run a script <code class="code docutils literal notranslate"><span class="pre">test.py</span></code>, you can use</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">arch</span> <span class="o">-</span><span class="n">x86_64</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">python</span> <span class="n">test</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
</div>
</section>
<section id="julia-source-installation">
<span id="compiling-julia"></span><h2>Julia Source Installation<a class="headerlink" href="#julia-source-installation" title="Permalink to this heading">#</a></h2>
<p>By default, MParT will look for Julia during configuration and will attempt to build the Julia bindings if the Julia <code class="code docutils literal notranslate"><span class="pre">CxxWrap</span></code> package is installed.   To install <code class="code docutils literal notranslate"><span class="pre">CxxWrap</span></code>, run the following command in your Julia prompt:</p>
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="k">import</span><span class="w"> </span><span class="n">Pkg</span><span class="p">;</span><span class="w"> </span><span class="n">Pkg</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s">&quot;CxxWrap&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>To prevent the Julia bindings from being compiled, even if Julia and CxxWrap are installed, set <code class="code docutils literal notranslate"><span class="pre">MPART_JULIA=OFF</span></code> during the CMake configuration.</p>
<p>Once MParT is installed with Julia bindings (i.e. <code class="code docutils literal notranslate"><span class="pre">MPART_JULIA=ON</span></code>) into <code class="code docutils literal notranslate"><span class="pre">/your/MParT/install/path</span></code> (an equivalent path to <code class="code docutils literal notranslate"><span class="pre">CMAKE_INSTALL_PREFIX</span></code>), you can use MParT in Julia with a few more steps. First, add <code class="code docutils literal notranslate"><span class="pre">MParT.jl</span></code>, which holds the Julia interface for MParT, via <code class="code docutils literal notranslate"><span class="pre">using</span> <span class="pre">Pkg;</span> <span class="pre">Pkg.add(&quot;MParT&quot;)</span></code> in the Julia REPL. Then, create a file <code class="code docutils literal notranslate"><span class="pre">~/.julia/artifacts/Overrides.toml</span></code> with the following lines</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[bee5971c-294f-5168-9fcd-9fb3c811d495]</span>
<span class="n">MParT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;/your/MParT/install/path&quot;</span>
</pre></div>
</div>
<p>Make sure that this file includes a full installation path from root! At this point, you should be able to open up a REPL and type <code class="code docutils literal notranslate"><span class="pre">using</span> <span class="pre">MParT</span></code> and get going with any of the provided examples. If you want to develop MParT’s bindings on the Julia-side, then use <code class="code docutils literal notranslate"><span class="pre">using</span> <span class="pre">Pkg;</span> <span class="pre">Pkg.develop(&quot;MParT&quot;)</span></code> instead of <code class="code docutils literal notranslate"><span class="pre">Pkg.add(&quot;MParT&quot;)</span></code> to install the package.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>If you installed Julia with Conda, you may not have a folder at <code class="code docutils literal notranslate"><span class="pre">~/.julia</span></code>. In this case, you will likely find the <code class="code docutils literal notranslate"><span class="pre">artifacts</span></code> folder in <code class="code docutils literal notranslate"><span class="pre">~/anaconda3/envs/&lt;YOUR</span> <span class="pre">ENVIRONMENT&gt;/share/julia/artifacts</span></code> (or alternatively, <code class="code docutils literal notranslate"><span class="pre">~/miniconda</span></code>, depending on what version of Conda you installed). If this is the case, then you will need to create a file <code class="code docutils literal notranslate"><span class="pre">~/anaconda3/envs/&lt;YOUR</span> <span class="pre">ENVIRONMENT&gt;/share/julia/artifacts/Overrides.toml</span></code> with the same contents as above.</p>
</div>
</section>
<section id="compiling-with-cuda-support">
<h2>Compiling with CUDA Support<a class="headerlink" href="#compiling-with-cuda-support" title="Permalink to this heading">#</a></h2>
<section id="building-the-kokkos-dependency">
<h3>Building the Kokkos Dependency<a class="headerlink" href="#building-the-kokkos-dependency" title="Permalink to this heading">#</a></h3>
<p>To support a GPU at the moment, you need a few special requirements. Due to the way that Kokkos handles GPU code, MParT must be compiled using a special wrapper around NVCC that Kokkos provides.  Because of this, MParT cannot use an internal build of Kokkos and Kokkos must therefore be compiled (or otherwise installed) manually.</p>
<p>The following cmake command can be used to compile Kokkos with the CUDA backend enabled and with all options required by MParT.  Kokkos source code can be obtained from the <a class="reference external" href="https://github.com/kokkos/kokkos">kokkos/kokkos</a> repository on Github.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>&lt;path/to/kokkos&gt;
mkdir<span class="w"> </span>build
<span class="nb">cd</span><span class="w"> </span>build
cmake<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>-DCMAKE_INSTALL_PREFIX<span class="o">=</span>&lt;/new/kokkos/install/path&gt;<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>-DBUILD_SHARED_LIBS<span class="o">=</span>ON<span class="w">                            </span><span class="se">\</span>
<span class="w">    </span>-DKokkos_ENABLE_SERIAL<span class="o">=</span>OFF<span class="w">                        </span><span class="se">\</span>
<span class="w">    </span>-DKokkos_ENABLE_THREADS<span class="o">=</span>ON<span class="w">                        </span><span class="se">\</span>
<span class="w">    </span>-DKokkos_ENABLE_CUDA<span class="o">=</span>ON<span class="w">                           </span><span class="se">\</span>
<span class="w">    </span>-DKokkos_ENABLE_CUDA_LAMBDA<span class="o">=</span>ON<span class="w">                    </span><span class="se">\</span>
<span class="w">    </span>-DCMAKE_CXX_STANDARD<span class="o">=</span><span class="m">17</span><span class="w">                           </span><span class="se">\</span>
../
</pre></div>
</div>
<p>Replace the <code class="code docutils literal notranslate"><span class="pre">Kokkos_ARCH_VOLTA70</span></code> as needed with whatever other arch the compute resource uses that Kokkos supports. If you aren’t sure, try omitting this as Kokkos has some machinery to detect such architecture.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>If Kokkos may not be able to find your GPU information automatically, consider including <code class="code docutils literal notranslate"><span class="pre">-DKokkos_ARCH_&lt;ARCH&gt;&lt;VERSION&gt;=ON</span></code> where <code class="code docutils literal notranslate"><span class="pre">&lt;ARCH&gt;</span></code> and <code class="code docutils literal notranslate"><span class="pre">&lt;VERSION&gt;</span></code> are determined by <a class="reference external" href="https://kokkos.github.io/kokkos-core-wiki/keywords.html?highlight=volta70#architecture-keywords">the Kokkos documentation</a>. If Kokkos cannot find CUDA, or you wish to use a particular version, use <code class="code docutils literal notranslate"><span class="pre">-DKokkos_CUDA_DIR=/your/cuda/path</span></code>.</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>If you’re getting an error about C++ standards, try using a new version of your compiler; <code class="code docutils literal notranslate"><span class="pre">g++</span></code>, for example, does not support the flag <code class="code docutils literal notranslate"><span class="pre">--std=c++17</span></code> below version 8. For more details, see <a class="reference external" href="https://github.com/kokkos/kokkos/issues/5157">this issue</a> in Kokkos.</p>
</div>
</section>
<section id="installing-cublas-and-cusolver">
<h3>Installing cublas and cusolver<a class="headerlink" href="#installing-cublas-and-cusolver" title="Permalink to this heading">#</a></h3>
<p>MParT uses the CUBLAS and CUSOLVER components of the <a class="reference external" href="https://developer.nvidia.com/cuda-toolkit">NVIDIA CUDA Toolkit</a> for GPU-accelerated linear algebra.</p>
<p>NVIDIA’s <a class="reference external" href="https://docs.nvidia.com/cuda/cuda-installation-guide-linux/index.html">Cuda installation guide</a> provides detailed instructions on how to install CUDA.   For Debian-based x86_64 systems, we have been able to successfully install cuda, cublas, and cusparse for CUDA 11.4 using the command below.  Notice the installation of <code class="code docutils literal notranslate"><span class="pre">*-dev</span></code> packages, which are required to obtain the necessary header files.  Similar commands may be useful on other systems.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="nv">CUDA_VERSION</span><span class="o">=</span><span class="m">11</span>.4
<span class="nb">export</span><span class="w"> </span><span class="nv">CUDA_COMPAT_VERSION</span><span class="o">=</span><span class="m">470</span>.129.06-1
<span class="nb">export</span><span class="w"> </span><span class="nv">CUDA_CUDART_VERSION</span><span class="o">=</span><span class="m">11</span>.4.148-1

curl<span class="w"> </span>-sL<span class="w"> </span><span class="s2">&quot;https://developer.download.nvidia.com/compute/cuda/repos/ubuntu2004/x86_64/7fa2af80.pub&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>apt-key<span class="w"> </span>add<span class="w"> </span>-
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;deb https://developer.download.nvidia.com/compute/cuda/repos/ubuntu2004/x86_64/ /&quot;</span><span class="w"> </span>&gt;<span class="w"> </span>/etc/apt/sources.list.d/cuda.list
sudo<span class="w"> </span>apt-key<span class="w"> </span>adv<span class="w"> </span>--keyserver<span class="w"> </span>keyserver.ubuntu.com<span class="w"> </span>--recv-keys<span class="w"> </span>A4B469963BF863CC

sudo<span class="w"> </span>apt-get<span class="w"> </span>-yq<span class="w"> </span>update
sudo<span class="w"> </span>apt-get<span class="w"> </span>-yq<span class="w"> </span>install<span class="w"> </span>--no-install-recommends<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>cuda-compat-<span class="si">${</span><span class="nv">CUDA_VERSION</span><span class="p">/./-</span><span class="si">}</span><span class="o">=</span><span class="si">${</span><span class="nv">CUDA_COMPAT_VERSION</span><span class="si">}</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>cuda-cudart-<span class="si">${</span><span class="nv">CUDA_VERSION</span><span class="p">/./-</span><span class="si">}</span><span class="o">=</span><span class="si">${</span><span class="nv">CUDA_CUDART_VERSION</span><span class="si">}</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>libcublas-<span class="si">${</span><span class="nv">CUDA_VERSION</span><span class="p">/./-</span><span class="si">}</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>libcublas-dev-<span class="si">${</span><span class="nv">CUDA_VERSION</span><span class="p">/./-</span><span class="si">}</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>libcusolver-<span class="si">${</span><span class="nv">CUDA_VERSION</span><span class="p">/./-</span><span class="si">}</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>libcusolver-dev-<span class="si">${</span><span class="nv">CUDA_VERSION</span><span class="p">/./-</span><span class="si">}</span>
</pre></div>
</div>
</section>
<section id="building-mpart">
<h3>Building MParT<a class="headerlink" href="#building-mpart" title="Permalink to this heading">#</a></h3>
<p>Using the above documentation on building with an external install of Kokkos, we can then configure MParT from the <code class="code docutils literal notranslate"><span class="pre">build</span></code> directory using the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>&lt;path/to/MParT&gt;
mkdir<span class="w"> </span>build
<span class="nb">cd</span><span class="w"> </span>build
cmake<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>-DCMAKE_INSTALL_PREFIX<span class="o">=</span>&lt;your/MParT/install/path&gt;<span class="w">                 </span><span class="se">\</span>
<span class="w">    </span>-DKokkos_ROOT<span class="o">=</span>&lt;/new/kokkos/install/path&gt;<span class="w">                         </span><span class="se">\</span>
<span class="w">    </span>-DCMAKE_CXX_COMPILER<span class="o">=</span>&lt;/new/kokkos/install/path&gt;/bin/nvcc_wrapper<span class="w"> </span><span class="se">\</span>
..
</pre></div>
</div>
<p>Make sure that <code class="code docutils literal notranslate"><span class="pre">CMAKE_CXX_COMPILER</span></code> uses a full path from the root!</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>If you’re using a Power8 or Power9 architecture, Eigen may give you trouble when trying to incorporate vectorization using Altivec, specifically when compiling for GPU. In this case, go into <code class="code docutils literal notranslate"><span class="pre">CMakeFiles.txt</span></code> and add <code class="code docutils literal notranslate"><span class="pre">add_compile_definition(EIGEN_DONT_VECTORIZE)</span></code>.</p>
</div>
</section>
</section>
</section>


                </article>
              
              
              
                <footer class="bd-footer-article">
                  <!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="../index.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">MParT: Monotone Parameterization Toolkit</p>
      </div>
    </a>
    <a class="right-next"
       href="getting_started.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Getting Started</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">Installation</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#compiling-from-source">Compiling from Source</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#tests">Tests</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#environment-paths">Environment Paths</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#julia-source-installation">Julia Source Installation</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#compiling-with-cuda-support">Compiling with CUDA Support</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#building-the-kokkos-dependency">Building the Kokkos Dependency</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#installing-cublas-and-cusolver">Installing cublas and cusolver</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#building-mpart">Building MParT</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  </nav></div>

  <div class="sidebar-secondary-item">
  <div class="tocsection sourcelink">
    <a href="../_sources/source/installation.rst.txt">
      <i class="fa-solid fa-file-lines"></i> Show Source
    </a>
  </div>
</div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            <div class="bd-footer-content__inner"></div>
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=12da95d707ffb74b382d"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=12da95d707ffb74b382d"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">
  <p class="copyright">
    
      © Copyright 2022, The MParT development team..
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">
  <p class="sphinx-version">
    Created using <a href="https://sphinx-doc.org/">Sphinx</a> 5.3.0.
    <br/>
  </p>
</div>
      
    </div>
  
  
    <div class="footer-items__end">
      
        <div class="footer-item"><p class="theme-version">
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.13.1.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>